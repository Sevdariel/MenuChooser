<div class="p-4 bg-white rounded-lg shadow">
  <h2 class="text-xl font-semibold mb-4">Add Product to Recipe</h2>
  
  <div class="grid gap-4">
    <!-- Product Autocomplete -->
    <div class="field">
      <label for="product" class="block text-sm font-medium text-gray-700 mb-1">Product</label>
      <p-autoComplete 
        id="product"
        [(ngModel)]="selectedProduct"
        [suggestions]="filteredProducts"
        (completeMethod)="filterProducts($event)"
        field="name"
        placeholder="Search for a product..."
        [dropdown]="true"
        [forceSelection]="true"
        [minLength]="1"
        class="w-full"
        inputStyleClass="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      >
        <ng-template let-product pTemplate="item">
          <div class="flex items-center">
            <span class="font-medium">{{product.name}}</span>
            <span class="ml-2 text-sm text-gray-500" *ngIf="product.unit">({{product.unit}})</span>
          </div>
        </ng-template>
      </p-autoComplete>
    </div>

    <!-- Quantity Input -->
    <div class="field">
      <label for="quantity" class="block text-sm font-medium text-gray-700 mb-1">Quantity</label>
      <p-inputNumber 
        id="quantity"
        [(ngModel)]="quantity"
        mode="decimal"
        [min]="0.01"
        [step]="0.01"
        [minFractionDigits]="2"
        [maxFractionDigits]="2"
        placeholder="Enter quantity"
        class="w-full"
        inputStyleClass="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      ></p-inputNumber>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-end gap-2 mt-4">
      <button 
        pButton 
        type="button" 
        label="Cancel" 
        icon="pi pi-times" 
        class="p-button-text"
        (click)="onCancel()"
      ></button>
      <button 
        pButton 
        type="button" 
        label="Add Product" 
        icon="pi pi-plus" 
        [disabled]="!selectedProduct || !quantity || quantity <= 0"
        (click)="onSave()"
      ></button>
    </div>
  </div>
</div>
