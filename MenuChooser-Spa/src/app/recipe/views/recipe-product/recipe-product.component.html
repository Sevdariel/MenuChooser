<form (submit)="onSave($event)" class="p-4">
  <div class="field">
    <label for="product" class="block text-sm font-medium text-gray-700 mb-1"
      >Product</label
      >
      <p-autoComplete
        id="product"
        [formField]="signalForm.product"
        optionLabel="name"
        [suggestions]="suggestionProducts()"
        (completeMethod)="search($event)"
        placeholder="Search for a product..."
        [dropdown]="true"
        [forceSelection]="true"
        [minLength]="1"
        class="w-full"
        inputStyleClass="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        >
        <ng-template let-product pTemplate="item">
          <div class="flex items-center">
            <span class="font-medium">{{ product.name }}</span>
            @if (product.unit) {
              <span class="ml-2 text-sm text-gray-500"
                >({{ product.unit }})</span
                >
              }
            </div>
          </ng-template>
        </p-autoComplete>
      </div>

      <div class="field">
        <label for="quantity" class="block text-sm font-medium text-gray-700 mb-1"
          >Quantity</label
          >
          <p-inputNumber
            id="quantity"
            [formField]="signalForm.quantity"
            mode="decimal"
            [min]="0.01"
            [step]="0.01"
            [minFractionDigits]="2"
            [maxFractionDigits]="2"
            placeholder="Enter quantity"
            class="w-full"
            inputStyleClass="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          ></p-inputNumber>
        </div>

        <div class="flex justify-end gap-2 mt-4">
          <button
            pButton
            type="button"
            label="Cancel"
            icon="pi pi-times"
            class="p-button-text"
            (click)="closeDrawer.emit(null)"
          ></button>
          <button
            pButton
            type="submit"
            label="Save"
            icon="pi pi-plus"
            class="p-button-primary"
            [disabled]="productForm.invalid"
          ></button>
        </div>
      </form>
